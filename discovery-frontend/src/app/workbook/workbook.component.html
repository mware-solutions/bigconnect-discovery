<!--
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~      http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->

<div class="ddp-ui-contentsin" *ngIf="mode === 'VIEW' || mode === 'NO_DATA'">
  <!-- 워크북 lnb -->
  <div class="ddp-lnb-dashboard py-3" [class.ddp-close]="isCloseDashboardList">

    <!-- loading -->
    <div *ngIf="isShowLnbLoading" class="ddp-loading-part">
      <div style="" class="lds-wedges">
        <div><div><div></div></div><div><div></div></div><div><div></div></div><div><div></div></div></div></div>
    </div>

    <!--  Toggle -->
    <div class="toggle">
      <a href="javascript:"  (click)="toggleFoldDashboardList()">
        <i *ngIf="!isCloseDashboardList" nz-icon type="left-square" theme="outline"></i>
        <i *ngIf="isCloseDashboardList" nz-icon type="right-square" theme="outline"></i>
        <div class="ddp-ui-tooltip-info ddp-down">
          <em class="ddp-icon-view-top"></em>
          {{(isCloseDashboardList ? 'msg.board.ui.unfold' : 'msg.board.ui.fold') | translate}}
        </div>
      </a>
    </div>


    <!-- // 좌측 워크스페이스 제목 영역 -->
    <div class="ddp-wrap-tab2 py-3">
      <!-- tab -->
      <ul class="ddp-list-tab2 py-3 d-flex mx-2">
        <li class="d-flex px-3 border-right" [ngClass]="{'ddp-selected' : leftTab == 'DASHBOARD'}">
          <i nz-icon type="dashboard" theme="outline" class="pr-2"></i>
          <a href="javascript:" (click)="changeTab('DASHBOARD')" class="d-flex">
            <span>{{'msg.comm.ui.dashboard' | translate}}: </span>
            <strong class="pl-1">{{dashboardPage.totalElements ? dashboardPage.totalElements : '0' }}</strong>
          </a>
        </li>
        <li class="d-flex pl-3" [ngClass]="{'ddp-selected' : leftTab == 'CHAT'}">
          <i nz-icon type="message" theme="outline" class="pr-2"></i>
          <a href="javascript:" (click)="changeTab('CHAT')" class="d-flex">
            <span>{{'msg.comm.ui.comment' | translate}}: </span>
            <strong class="pl-1">{{comments && comments.comments ? comments.comments.length : '0'}}</strong>
            <!-- new 아이콘 -->
            <em class="ddp-icon-new-r" *ngIf="isNewComment" ></em>
          </a>
        </li>

      </ul>
      <!-- //tab -->
      <div class="ddp-wrap-tab2-contents">
        <!-- dashboard tab contents -->
        <div class="ddp-ui-tab2-contents ddp-wrap-tab-dashboard" *ngIf="leftTab == 'DASHBOARD'">
          <!-- setting -->
          <div class="ddp-ui-setting ddp-clear">

              <div class="ddp-data-selectbox d-flex px-4" (click)="toggleDatasourceLayer()" >
                <i nz-icon type="database" theme="outline" class="pr-2"></i>
                {{'msg.board.th.datasource' | translate}}
                <i nz-icon type="caret-down" theme="outline" class="pl-1"></i>
              </div>
            <!-- 데이터 베이스 수 -->
            <div class="ddp-wrap-selectbox" [class.ddp-selected]="isShowDatasourceMenu" *ngIf="datasources">

              <!-- 팝업 -->
              <div class="ddp-wrap-popup2" (clickOutside)="isShowDatasourceMenu=false"
                   [excludeBeforeClick]="true" [exclude]="'.ddp-data-selectbox'">
                <ul class="ddp-list-popup ddp-type">
                  <li *ngFor="let ds of datasources" [ngClass]="{'ddp-selected' : ds.valid && selectedDatasources.indexOf(ds.id) > -1, 'ddp-disabled' : !ds.valid}">
                    <a href="javascript:" >
                      <label class="ddp-label-checkbox">
                        <input (click)="selectDatasource(ds.id);"
                               [checked]="ds.valid && selectedDatasources.indexOf(ds.id) > -1" type="checkbox" >
                        <i class="ddp-icon-checkbox"></i>
                        <span class="ddp-txt-checkbox" title="{{ds['name']}}">{{ds['name']}}</span>
                      </label>
                    </a>
                  </li>
                </ul>
              </div>
              <!-- //팝업 -->
            </div>
            <!-- //데이터 베이스 수 -->
            <!-- show -->
            <label *ngIf="isChangeAuthUser && publicType.SHARED === workspace?.publicType" class="ddp-label-checkbox ddp-type-show">
              <input type="checkbox" [checked]="onlyShowingFlag" (change)="onlyShowingFlag = !onlyShowingFlag;">
              <i class="ddp-icon-checkbox"></i>
              <span class="ddp-txt-checkbox">{{ 'msg.board.ui.show.only' | translate }}</span>
            </label>
            <!-- //show -->
          </div>
          <!-- //setting -->
          <div class="ddp-wrap-board-view">
            <div class="ddp-ui-board-view">
              <!-- search -->
              <div class="ddp-wrap-search">
                <div class="ddp-form-search">
                  <em class="ddp-icon-search"></em>
                  <input #srchDashboard [ngModel]="dashboardSrchText" (keypress)="searchDashboardByName($event)"
                         type="text" placeholder="{{'msg.board.ui.board.dsource.ph' | translate}}">
                  <em *ngIf="isShowBtnClearSrchDashboard()" (click)="clearSearchText()"
                      class="ddp-btn-search-close" ></em>
                </div>
              </div>
              <!-- //search -->
              <!-- 리스트 뷰 -->
              <div class="ddp-ui-board-listview" *ngIf="listType == 'LIST'">
                <ul class="ddp-list-board-listview"
                    dnd-sortable-container [sortableData]="filteredDashboard" [dropZones]="['source-dropZone']" >
                  <li *ngFor="let dashboard of filteredDashboard ; let x = index"
                      (click)="detailDashboard(dashboard)"
                      dnd-sortable
                      [sortableIndex]="x"
                      [dragEnabled]="true"
                      [dragData]="dashboard"
                      (onDropSuccess)="changeOrder()"
                      [class.ddp-selected]="selectedDashboard && dashboard.id === selectedDashboard.id"
                      [class.ddp-disabled]="isInvalidDatasource(dashboard)" >
                    <a href="javascript:">
                      <span class="ddp-ui-number">{{x + 1}}</span>
                      <em *ngIf="isChangeAuthUser && publicType.SHARED === workspace?.publicType"
                          [ngClass]="{'ddp-icon-eyes2' : !dashboard.hiding, 'ddp-icon-eyes2-none' : dashboard.hiding}"
                          (click)="changeFavorite(dashboard, $event);"></em>
                      <div class="ddp-ui-name">
                        <span class="ddp-data-name"
                              [ngStyle]="isChangeAuthUser && publicType.SHARED === workspace?.publicType ? {}:{'padding-left': '0px' }"
                              [class.ddp-data-new]="dashboard.createdTime | moment: 'isNew'">
                          <div class="ddp-ui-name">
                               {{dashboard.name}}
                              <em class="ddp-icon-new" *ngIf="dashboard.createdTime | moment: 'isNew'">
                                {{'msg.common.ui.new' | translate}}
                              </em>
                          </div>
                        </span>
                      </div>
                      <!-- buttons -->
                      <div class="ddp-btn-control" *ngIf="isChangeAuthUser" >
                        <em class="ddp-icon-control-copy-s" (click)="copyDashboard(dashboard); $event.stopPropagation();">
                          <div class="ddp-ui-tooltip-info ddp-down ddp-right">
                            <em class="ddp-icon-view-top"></em>
                            {{'msg.comm.ui.clone' | translate}}
                          </div>
                        </em>
                        <em class="ddp-icon-control-cut-s" (click)="confirmDeleteDashboard(dashboard); $event.stopPropagation();">
                          <div class="ddp-ui-tooltip-info ddp-down ddp-right">
                            <em class="ddp-icon-view-top"></em>
                            {{'msg.comm.ui.del' | translate}}
                          </div>
                        </em>
                      </div>
                      <!-- //buttons -->
                    </a>
                  </li>
                </ul>
                <a [style.display]="isShowMoreDashboardList ? 'block':'none'"
                   (click)="loadDashboardList(dashboardPage.number+1)"
                   href="javascript:" class="ddp-link-more">+ {{'msg.comm.ui.more' | translate}}</a>
              </div>
              <!-- //리스트 뷰 -->
              <!-- 그리드 뷰 -->
              <div class="ddp-ui-board-thumbview" *ngIf="listType == 'CARD'">
                <ul class="ddp-list-board-thumbview"
                    dnd-sortable-container [sortableData]="filteredDashboard" [dropZones]="['source-dropZone']" >
                  <li *ngFor="let dashboard of filteredDashboard; let x = index"
                      (click)="detailDashboard(dashboard)"
                      dnd-sortable
                      [sortableIndex]="x"
                      [dragEnabled]="true"
                      [dragData]="dashboard"
                      (onDropSuccess)="changeOrder()"
                      [class.ddp-selected]="selectedDashboard && dashboard.id === selectedDashboard.id"
                      [class.ddp-disabled]="isInvalidDatasource(dashboard)">
                    <a href="javascript:">
                      <span class="ddp-icon-number">{{x + 1}}</span>
                      <span class="ddp-data-name"
                            [ngStyle]="isChangeAuthUser && publicType.SHARED === workspace?.publicType ? {}:{'padding-left': '0px' }" >
                        <em *ngIf="isChangeAuthUser && publicType.SHARED === workspace?.publicType"
                            [ngClass]="{'ddp-icon-eyes2' : !dashboard.hiding, 'ddp-icon-eyes2-none' : dashboard.hiding}"
                            (click)="changeFavorite(dashboard, $event);"></em>
                        {{dashboard.name}}
                      </span>
                      <span class="ddp-wrap-image" >
                        <img *ngIf="dashboard.imageUrl" (invoke)="dashboardUtil.getBoardImage($event, dashboard.imageUrl)" />
                      </span>
                      <!-- buttons -->
                      <div class="ddp-btn-control" *ngIf="isChangeAuthUser">
                        <em class="ddp-icon-control-copy-s" (click)="copyDashboard(dashboard); $event.stopPropagation();">
                          <div class="ddp-ui-tooltip-info ddp-down ddp-right">
                            <em class="ddp-icon-view-top"></em>
                            {{'msg.comm.ui.clone' | translate}}
                          </div>
                        </em>
                        <em class="ddp-icon-control-cut-s" (click)="confirmDeleteDashboard(dashboard); $event.stopPropagation();">
                          <div class="ddp-ui-tooltip-info ddp-down ddp-right">
                            <em class="ddp-icon-view-top"></em>
                            {{'msg.comm.ui.del' | translate}}
                          </div>
                        </em>
                      </div>
                      <!-- //buttons -->
                    </a>
                  </li>
                </ul>
                <a [style.display]="isShowMoreDashboardList ? 'block':'none'"
                   (click)="loadDashboardList(dashboardPage.number+1)"
                   href="javascript:" class="ddp-link-more">+ {{'msg.comm.ui.more' | translate}}</a>
              </div>
              <!-- // 그리드 뷰 -->
            </div>
            <!-- 대시보드 추가 -->
            <div class="ddp-btn-board-add" *ngIf="isChangeAuthUser">
              <a href="javascript:" class="ddp-link-board-add" (click)="createDashboard()">
                <em class="ddp-link-add"></em>
                {{'msg.comm.ui.create.board' | translate}}
              </a>
            </div>
            <!-- // 대시보드 추가 -->
          </div>
        </div>
        <!-- //dashboard tab contents -->
        <!-- chat tab contents -->
        <div class="ddp-ui-tab2-contents ddp-wrap-tab-chat" *ngIf="leftTab == 'CHAT'">
          <!-- chat -->
          <div class="ddp-ui-chat mx-3">
            <ul class="ddp-list-chat">
              <li *ngFor="let comment of comments.comments;" [ngClass]="{'ddp-data-me':username == comment.createdBy.fullName, 'ddp-box-edit': comment.isEdit}">
                <a href="javascript:">
                  <div class="ddp-btn-control" *ngIf="username == comment.createdBy.username && !comment.isEdit">
                    <em class="ddp-icon-control-edit2" (click)="comment.isEdit = !comment.isEdit; comment.modifyContents = comment.contents"></em>
                    <em class="ddp-icon-control-cut" (click)="confirmDeleteComment(comment.id)" ></em>
                  </div>
                  <!-- chat 사용자 -->
                  <div class="ddp-data-chatuser">
                    <img [src]="getProfileImage(comment.createdBy)" class="ddp-data-photo" *ngIf="username != comment.createdBy.username"/>
                    <div class="ddp-data-name">
                      {{username == comment.createdBy.username ? '나' : comment.createdBy.fullName}}
                      <span class="ddp-data-time"> {{dateFormatTodayTimeElseDate(comment.createdTime)}}</span>
                      <em class="ddp-icon-new" *ngIf="comment.isNew"></em>
                    </div>
                  </div>
                  <!-- //chat 사용자 -->
                  <div class="ddp-data-chatcontent" *ngIf="!comment.isEdit" >{{comment.contents}}</div>
                </a>
                <!-- 편집 -->
                <div class="ddp-data-input px-3" *ngIf="comment.isEdit">
                  <textarea rows="5" [(ngModel)]="comment.modifyContents" (keypress)="createComments($event, comment)"></textarea>
                </div>
                <!-- //편집 -->
              </li>
            </ul>

          </div>
          <!-- // chat -->
          <!-- input -->
          <div class="ddp-ui-writechat px-3">
            <textarea class="ddp-textarea-chat"[(ngModel)]="commentText" (keypress)="createComments($event)" placeholder="{{'msg.book.ui.comment.description' | translate}}"></textarea>
          </div>
          <!-- // input -->
        </div>
        <!-- //chat tab contents -->

      </div>
    </div>
  </div>
  <!-- //워크북 lnb -->

  <!-- Dashboard navigation -->
  <div class="ddp-wrap-naviarea ddp-clear" *ngIf="selectedDashboard" >

    <!-- 우측 상단 버튼 모듬 -->
    <div class="ddp-ui-navidata">

        <span class="ddp-data-time"
              [innerHTML]="'msg.common.ui.updated.emphasis.name' | translate : {modifiedTime : selectedDashboard.modifiedTime | mdate:'YYYY-MM-DD HH:mm', fullName :getEditorName() } ">
        </span>
      <span class="ddp-data-source ddp-hover-tooltip">
          <a href="javascript:" class="ddp-icon-source3" (click)="isShowDataPreview=true"></a>
        <!-- tooltip -->
          <div class="ddp-ui-tooltip-info ddp-down">
            <em class="ddp-icon-view-top"></em>{{'msg.comm.ui.sel.ds' | translate}}
          </div>
        <!-- //tooltip -->
        </span>

      <!-- 대시보드 관련 버튼 모음 -->
      <div class="ddp-ui-work-buttons"  >
        <a href="javascript:" class="ddp-icon-board-monitoring" (click)="gotoPresentationView()">{{'msg.board.btn.present.view' | translate}}</a>
        <a
          *ngIf="isChangeAuthUser" (click)="changeMode('UPDATE')"
          href="javascript:" class="ddp-icon-board-edit" >
          {{'msg.board.btn.dashboard.edit' | translate}}
        </a>
        <!-- more -->
        <div *ngIf="isChangeAuthUser" class="ddp-ui-more ddp-hover-tooltip"
             [class.ddp-selected]="isShowDashboardDetailMenu"
             (click)="isShowDashboardDetailMenu = !isShowDashboardDetailMenu"
             (clickOutside)="isShowDashboardDetailMenu = false">
          <a href="javascript:" class="ddp-icon-more"></a>
          <!-- tooltip -->
          <div class="ddp-ui-tooltip-info ddp-down">
            <em class="ddp-icon-view-top"></em>
            {{'msg.comm.ui.more' | translate}}
          </div>
          <!-- //tooltip -->
          <!-- popup -->
          <div class="ddp-wrap-popup2 ddp-types">
            <ul class="ddp-list-popup">
              <li>
                <a href="javascript:" (click)="copyDashboard(selectedDashboard)">
                  <em class="ddp-icon-drop-dashboard"></em> {{'msg.board.btn.clone.dashboard' | translate}}
                </a>
              </li>
              <li>
                <a href="javascript:" (click)="confirmDeleteDashboard(selectedDashboard)">
                  <em class="ddp-icon-drop-editdel3"></em> {{'msg.board.btn.del.dashboard' | translate}}
                </a>
              </li>
            </ul>
            <!-- date -->
            <div class="ddp-ui-date" *ngIf="selectedDashboard && selectedDashboard.createdBy" >
                <span class="ddp-data-date"
                      [innerHTML]="'msg.common.ui.created.emphasis.name' | translate : {createdTime : selectedDashboard.createdTime | mdate:'YYYY-MM-DD HH:mm', fullName: selectedDashboard.createdBy.fullName }">
                </span>
            </div>
            <!-- //date -->
          </div>
          <!-- //popup -->
        </div>
        <!-- //more -->
      </div>
      <!-- // 대시보드 관련 버튼 모음 -->
    </div>
    <!-- // 우측 상단 버튼 모듬 -->

    <!-- 좌측 제목/설명 영역 -->
    <div class="ddp-wrap-box" >
      <em (dblclick)="copyBoardIdToClipboard()" class="ddp-icon-dashboard2" ></em>
      <div class="ddp-ui-naviarea" >
        <!-- name -->
        <div class="ddp-box-navi" [ngClass]="{'ddp-selected' : isDashboardNameEditMode}" >
          <div class="ddp-wrap-naviname" (click)="onChangeModeName($event)">
            <span class="ddp-data-naviname" [title]="selectedDashboard.name">{{selectedDashboard.name ? selectedDashboard.name : ''}}<em class="ddp-icon-edit2"></em></span>
          </div>
          <div class="ddp-wrap-input" >
            <component-input
              *ngIf="isDashboardNameEditMode"
              [value]="selectedDashboard.name"
              [inputClass]="'ddp-input-navi'"
              [maxLen]="50"
              [placeHolder]="'msg.board.ui.name.ph' | translate"
              (inputBlur)="isDashboardNameEditMode=false"
              (changeValue)="renameDashboard($event)"></component-input>
            <span class="ddp-btn-check" ></span>
          </div>
        </div>
        <!-- // name -->

        <!-- description -->
        <div class="ddp-box-navidet" [title]="selectedDashboard.description" [ngClass]="{'ddp-selected' : isDashboardDescEditMode}" >
          <div class="ddp-wrap-navidet" (click)="onChangeModeDesc($event)">
            <span class="ddp-data-navidet" >{{selectedDashboard.description || 'msg.board.ui.description.ph' | translate }}<em class="ddp-icon-edit2"></em></span>
          </div>
          <div class="ddp-wrap-input">
            <component-input
              *ngIf="isDashboardDescEditMode"
              [value]="selectedDashboard.description"
              [inputClass]="'ddp-input-navi'"
              [maxLen]="150"
              [placeHolder]="'msg.board.ui.description.ph' | translate"
              (inputBlur)="isDashboardDescEditMode=false"
              (changeValue)="changeDesc($event)"></component-input>
            <span class="ddp-btn-check" ></span>
          </div>
        </div>
        <!-- // description -->
      </div>
    </div>
    <!-- // 좌측 제목/설명 영역 -->

  </div>
  <!-- // Dashboard navigation -->

  <!-- dashboard contents -->
  <div class="ddp-ui-dash-contents page-dashboard mx-5" [class.ddp-close]="isCloseDashboardList" >
    <!-- Title bar -->
    <div class="row no-gutters py-3">
      <div class="col- pr-2 border-right"><i (click)="gotoWorkspace()" nz-icon type="double-left" theme="outline"></i></div>
      <div class="col- pl-3">
        <svg _ngcontent-c4="" fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg">
          <path _ngcontent-c4="" d="M10 0H5.66669C5.48261 0 5.33336 0.149251 5.33336 0.333333V2.66667H0.333335C0.149252 2.66667 0 2.81592 0 3V19.6667C0 19.8507 0.149252 20 0.333335 20H10C10.1841 20 10.3334 19.8507 10.3334 19.6667V0.333333C10.3334 0.149251 10.1841 0 10 0ZM9.66671 17.3333H6.00003V16.6667H9.66671V17.3333ZM0.66667 5H5.33336V15H0.66667V5ZM9.66671 3.66667H6.00003V2.66667H9.66671V3.66667ZM0.66667 15.6667H5.33336V16.6667H0.66667V15.6667ZM6.00003 16V4.33333H9.66671V16H6.00003ZM9.66671 0.666667V2H6.00003V0.666667H9.66671ZM5.33336 3.33333V4.33333H0.66667V3.33333H5.33336ZM0.66667 17.3333H5.33336V19.3333H0.66667V17.3333ZM6.00003 19.3333V18H9.66671V19.3333H6.00003Z" fill="#21A79C"></path>
          <path _ngcontent-c4="" d="M19.9893 18.2494L15.9893 2.91604C15.967 2.8301 15.9113 2.75669 15.8345 2.71194C15.7579 2.66734 15.6666 2.65513 15.5808 2.67808L10.5808 4.01141C10.4037 4.05862 10.2979 4.23993 10.3441 4.41734L14.3441 19.7507C14.3664 19.8366 14.4222 19.91 14.4991 19.9546C14.5757 19.999 14.667 20.0111 14.7526 19.988L19.7527 18.6546C19.9294 18.6074 20.0351 18.4265 19.9893 18.2494V18.2494ZM11.604 6.60598L15.96 5.44468L16.1167 6.04462L11.7611 7.2077L11.604 6.60598ZM16.285 6.69143L18.2183 14.1073L13.864 15.2691L11.9307 7.85272L16.285 6.69143ZM18.3881 14.7526L18.7294 16.0607L14.3734 17.222L14.0334 15.9144L18.3881 14.7526ZM15.4288 3.40839L15.7917 4.79999L11.4357 5.96096L11.0731 4.57001L15.4288 3.40839ZM14.9047 19.2583L14.5417 17.8667L18.8977 16.7051L19.2603 18.096L14.9047 19.2583Z" fill="#21A79C"></path>
          <path _ngcontent-c4="" d="M4.33339 6H1.66671C1.48263 6 1.33337 6.14925 1.33337 6.33333V9C1.33337 9.18408 1.48263 9.33333 1.66671 9.33333H4.33339C4.51747 9.33333 4.66672 9.18408 4.66672 9V6.33333C4.66672 6.14925 4.51747 6 4.33339 6ZM4.00005 8.66667H2.00004V6.66667H4.00005V8.66667Z" fill="#21A79C"></path>
        </svg>
      </div>
      <h2 class="col- px-2 border-right dashboerdTitle"  title="{{workbook.name}}"> <span>{{workbook.name}}</span></h2>
      <!-- more -->
      <div *ngIf="isChangeAuthUser"
           class="ddp-ui-more ddp-hover-tooltip col- pl-2" [ngClass]="{'ddp-selected' : isShowDetailMenu}"
           (click)="toggleWorkbookDetailMenu($event)" >
        <i nz-icon type="ellipsis" theme="outline"></i>
        <a href="javascript:" class="ddp-icon-more"></a>
        <div class="ddp-ui-tooltip-info ddp-down">
          <em class="ddp-icon-view-top"></em>
          {{'msg.comm.ui.more' | translate}}
        </div>
      </div>
      <!-- // more -->
      <div class="col- ml-auto border-right px-2 ddp-hover-tooltip">
        <div [ngClass]="{'ddp-selected' : listType == 'CARD'}">
          <a href="javascript:" (click)="changeListType('CARD')">
            <i nz-icon type="appstore" theme="outline"></i></a>
          <div class="ddp-ui-tooltip-info ddp-down">
            <em class="ddp-icon-view-top"></em>
            {{'msg.comm.ui.list.thumbnail.view' | translate}}
          </div>
        </div>
      </div>
      <div class="col- px-2">
        <div [ngClass]="{'ddp-selected' : listType == 'LIST'}" class="ddp-hover-tooltip">
          <a href="javascript:" (click)="changeListType('LIST')">
            <i nz-icon type="bars" theme="outline"></i>
          </a>
          <div class="ddp-ui-tooltip-info ddp-down">
            <em class="ddp-icon-view-top"></em>
            {{'msg.comm.ui.list.list.view' | translate}}
          </div>
        </div>
      </div>
    </div>
    <!-- // Title bar -->

    <!-- 대시보드 없음 -->
    <div class="ddp-box-data-none" *ngIf="mode === 'NO_DATA'" >
      <div class="ddp-wrap-data-none">
        <div class="ddp-ui-data-none">
          <em class="ddp-img-nodata"></em>
          <span class="ddp-txt-nodata">
            {{'msg.board.ui.dashboard.none' | translate}}<br />
            <span *ngIf="isChangeAuthUser">{{'msg.board.ui.dashboard.none.description' | translate}}</span>
          </span>
          <a *ngIf="isChangeAuthUser" (click)="createDashboard()"
             href="javascript:" class="ddp-link-board-add" >
            <em class="ddp-link-add"></em>{{'msg.comm.ui.create.board' | translate}}
          </a>
        </div>
      </div>
    </div>
    <!-- // 대시보드 없음 -->

    <!-- board buttons -->
    <div class="ddp-ui-fix-buttons" *ngIf="isChangeAuthUser && selectedDashboard">
      <div class="ddp-btn-widget">
        <a (click)="addWidget('NEW_CHART')" href="javascript:" class="ddp-btn-chart">
          <em class="ddp-icon-chart-new"></em>{{'msg.board.btn.new.chart' | translate}}
        </a>
        <!-- 화살표 -->
        <!-- 클릭시 ddp-selected 추가 -->
        <div class="ddp-wrap-view ddp-selected">
          <a href="javascript:" class="ddp-btn-view"></a>
          <div class="ddp-wrap-popup2 ddp-types">
            <ul class="ddp-list-popup">
              <li>
                <a (click)="addWidget('NEW_CHART')" href="javascript:" >
                  <em class="ddp-icon-chart-new"></em> {{'msg.board.btn.new.chart' | translate}}
                </a>
              </li>
              <li>
                <a (click)="addWidget('NEW_FILTER')" href="javascript:">
                  <em class="ddp-icon-filter-new"></em> {{'msg.board.btn.new.filter' | translate}}
                </a>
              </li>
              <li *ngIf="false">
                <a href="javascript:">
                  <em class="ddp-icon-parameter-new"></em>
                  Parameter
                </a>
              </li>
              <li>
                <a (click)="addWidget('NEW_TEXT')" href="javascript:">
                  <em class="ddp-icon-text-new"></em> {{'msg.board.btn.new.text' | translate}}
                </a>
              </li>
            </ul>
          </div>
        </div>
        <!-- //화살표 -->
      </div>
    </div>
    <!-- //board buttons -->
    <app-dashboard [isManagementUser]="isChangeAuthUser" [dashboard]="selectedDashboard"
                   (dashboardEvent)="onDashboardEvent($event)" ></app-dashboard>
  </div>
  <!-- // dashboard contents -->
</div>

<!-- 워크북 부가메뉴 레이어 -->
<div *ngIf="isShowDetailMenu" style="display:block;" class="ddp-wrap-popup2 ddp-types ddp-popup-lnbmore">
  <ul class="ddp-list-popup">
    <li *ngIf="isChangeAuthUser">
      <a href="javascript:" (click)="updateWorkbook()">
        <em class="ddp-icon-drop-editmodify"></em>
        {{'msg.book.ui.edit.name' | translate}}
      </a>
    </li>
    <li *ngIf="isChangeAuthUser">
      <a href="javascript:" (click)="confirmDeleteWorkbook()">
        <em class="ddp-icon-drop-editdel3"></em>
        {{'msg.book.ui.del' | translate}}
      </a>
    </li>
  </ul>
  <!-- 생성일 및 생성자 정보 -->
  <div class="ddp-ui-date">
    <span class="ddp-data-date">
      {{'msg.common.ui.updated' | translate : { modifiedTime : workbook.modifiedTime | mdate:'YYYY-MM-DD HH:mm', fullName : workbook.modifiedBy.fullName } }}
    </span>
    <span class="ddp-data-date">
      {{ 'msg.common.ui.created' | translate : { createdTime : workbook.createdTime | mdate:'YYYY-MM-DD HH:mm', fullName :workbook.createdBy.fullName } }}
    </span>
  </div>
  <!-- // 생성일 및 생성자 정보 -->
</div>
<!-- // 워크북 부가메뉴 레이어 -->

<popup-input-namedesc (triggerDone)="afterInputInfo($event)" ></popup-input-namedesc>
<app-delete-modal (deleteConfirm)="deleteContent($event)"></app-delete-modal>
<app-update-dashboard *ngIf="mode == 'UPDATE'"
                      [startupCmd]="updateDashboardStartupCmd"
                      [workbook]="workbook"
                      [dashboards]="dashboards"
                      (changeMode)="changeMode($event)"
                      (updateComplete)="updateCompleteDashboard($event)"
                      (createDashboard)="createDashboard()"
                      (selectedDashboard)="loadAndSelectDashboard($event)">
</app-update-dashboard>
<app-create-board *ngIf="isShowCreateDashboard"
                      [workbookId]="workbook.id" [workbookName]="workbook.name" [workspaceId]="workbook.workspaceId"
                      (close)="closeCreateDashboard()"></app-create-board>
<!-- 데이터 미리보기 -->
<data-preview *ngIf="isShowDataPreview" [source]="selectedDashboard" (close)="isShowDataPreview=false"></data-preview>
<!-- 추천 필터 설정 -->
<app-essential-filter *ngIf="isShowDataIngestion" [datasource]="ingestionTargetDatasource"
                      (close)="isShowDataIngestion = false" (done)="finishDataIngestion($event)">
</app-essential-filter>
<!-- // 추천 필터 설정 -->
