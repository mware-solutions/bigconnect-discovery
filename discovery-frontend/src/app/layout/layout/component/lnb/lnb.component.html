<!--
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~      http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->

<!-- lnb -->
<div class="ddp-layout-lnb mx-5" [ngClass]="{'ddp-selected' : isShow}" >
  <!-- hamburg menu -->
  <a href="javascript:" class="ddp-btn-lnbmenu" (click)="lnbEvent()">
    <svg width="15" height="15" viewBox="0 0 21 19" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M20.3304 0H0.205357C0.0924107 0 0 0.0924107 0 0.205357V1.84821C0 1.96116 0.0924107 2.05357 0.205357 2.05357H20.3304C20.4433 2.05357 20.5357 1.96116 20.5357 1.84821V0.205357C20.5357 0.0924107 20.4433 0 20.3304 0ZM20.3304 16.0179H0.205357C0.0924107 16.0179 0 16.1103 0 16.2232V17.8661C0 17.979 0.0924107 18.0714 0.205357 18.0714H20.3304C20.4433 18.0714 20.5357 17.979 20.5357 17.8661V16.2232C20.5357 16.1103 20.4433 16.0179 20.3304 16.0179ZM20.3304 8.00893H0.205357C0.0924107 8.00893 0 8.10134 0 8.21428V9.85714C0 9.97009 0.0924107 10.0625 0.205357 10.0625H20.3304C20.4433 10.0625 20.5357 9.97009 20.5357 9.85714V8.21428C20.5357 8.10134 20.4433 8.00893 20.3304 8.00893Z" fill="#333333"/>
    </svg>
  </a>

  <ul class="ddp-list-lnb d-flex row no-gutters">
    <!-- WORKSPACE Tab -->
    <li class="col-3" [ngClass]="{'ddp-selected': lnbManager.workspace.fold == false}" *ngIf="permission.workspace">
      <div class="ddp-wrap-listmenu">
        <!-- Workspace title -->
        <a class="d-flex row no-gutters align-items-center pr-2 tabTitle" href="javascript:" (click)="depth1Menu1ClickListener( 'WORKSPACE' ); $event.stopImmediatePropagation()">
          <span class="col-">{{'msg.comm.menu.title.workspace' | translate}}</span>
          <i class="col- ml-auto" nz-icon type="down" theme="outline"></i>
        </a>
        <!-- // Workspace title -->
        <!-- sub -->
        <div class="ddp-list-sub">
          <!-- private workspace -->
          <div *ngIf="permission.myWorkspace" class="ddp-txt-title d-flex row no-gutters align-items-center" (click)="moveToWorkspace()" >
            <span class="col-">{{privateWorkspace.name}}</span>
            <i class="col- ml-auto" nz-icon type="caret-right" theme="outline" (click)="onOffFolderNavigation($event)"></i>
          </div>
          <!-- // private workspace -->
          <!-- favorites - exist list -->
          <div class="ddp-wrap-favorites" *ngIf="sharedWorkspace.length > 0">
            <h2>{{ 'msg.comm.ui.list.favorite' | translate }}</h2>
            <ul class="ddp-list-submenu">
              <li *ngFor="let workspace of sharedWorkspace"  [class.ddp-disabled]="!workspace.active" >
                <a href="javascript:" (click)="moveToWorkspace(workspace)" class="row d-flex no-gutters">
                  <span class="col-" [class.ddp-new]="workspace.createdTime | moment: 'isNew'">
                    {{workspace.name}} <em class="ddp-icon-new" *ngIf="workspace.createdTime | moment: 'isNew'">NEW</em>
                  </span>
                  <i class="col- ml-auto" nz-icon type="caret-right" theme="outline" (click)="onOffFolderNavigation($event, workspace)"></i>
                </a>
              </li>
            </ul>
            <!-- // favorites - exist list -->
            <div class="ddp-link-type row no-gutters mt-2" (click)="workspaceList(); $event.stopImmediatePropagation()">
              <i class="col- pr-2" nz-icon type="ordered-list" theme="outline"></i>
              <span class="col-">{{ 'msg.lnb.btn.workspace-list' | translate }}</span>
              <i class="col- ml-auto" nz-icon type="caret-right" theme="outline"></i>
            </div>
          </div>
          <!-- // favorites - exist list -->
          <!-- favorites - empty list  -->
          <div class="ddp-wrap-favorites" *ngIf="0 === sharedWorkspace.length">
            <h2>{{ 'msg.comm.ui.list.favorite' | translate }}</h2>
            <div class="ddp-txt-info">
              {{ 'msg.lnb.label.set-favorite-workspace' | translate }}
              <div class="ddp-link-type row no-gutters mt-2" (click)="workspaceList(); $event.stopImmediatePropagation()">
                <i class="col- pr-2" nz-icon type="ordered-list" theme="outline"></i>
                <span class="col-">{{ 'msg.lnb.btn.workspace-list' | translate }}</span>
                <i class="col- ml-auto" nz-icon type="caret-right" theme="outline"></i>
              </div>
            </div>
          </div>
          <!-- // favorites - empty list -->
        </div>
        <!-- //sub -->
      </div>
    </li>
    <!-- //WORKSPACE TAB -->

    <!-- EXPLOREDATA -->
    <li class="col-3" *ngIf="permission.exploreData" [ngClass]="{'ddp-selected': lnbManager.exploreData.fold == false}" >
      <div class="ddp-wrap-listmenu">
        <!-- tab title -->
        <a class="d-flex row no-gutters align-items-center pr-2 tabTitle justify-content-between" href="javascript:" (click)="depth1Menu1ClickListener( 'EXPLOREDATA' )">
          <span class="col-">{{'msg.comm.menu.title.explore-data' | translate}}</span>
          <span class="ddp-tag-beta col-">Beta</span>
          <i class="col- ml-auto" nz-icon type="down" theme="outline"></i>
        </a>
        <!-- // title -->
        <!-- sub -->
        <div class="ddp-list-sub">
          <!-- submenu -->
          <ul class="ddp-list-sublnb">
            <li [ngClass]="{'ddp-selected': lnbManager.exploreData.data.fold == false}" *ngIf="permission.exploreDataView">
              <a class="row no-gutters" href="javascript:" (click)=" move('exploredata/view')">
                <i class="col- pr-2" nz-icon type="database" theme="outline"></i>
                <span class="col-">{{'msg.comm.menu.explore-data.data' | translate}}</span>
              </a>
            </li>
            <li [ngClass]="{'ddp-selected': lnbManager.exploreData.data.fold == false}" *ngIf="permission.exploreData">
              <a class="row no-gutters" href="javascript:" (click)="move('exploredata/favorite/data')">
                <i class="col- pr-2" nz-icon type="database" theme="outline"></i>
                <span class="col-">{{'msg.comm.menu.explore-data.my.favorite.data' | translate}}</span>
              </a>
            </li>
            <li [ngClass]="{'ddp-selected': lnbManager.exploreData.data.fold == false}" *ngIf="permission.exploreFavorite">
              <a class="row no-gutters" href="javascript:" (click)=" move('exploredata/favorite/creator')">
                <i class="col- pr-2" nz-icon type="database" theme="outline"></i>
                <span class="col-">{{'msg.comm.menu.explore-data.favorite.creator' | translate}}</span>
              </a>
            </li>
          </ul>
          <!-- //submenu -->
        </div>
        <!-- //sub -->
      </div>
    </li>
    <!-- // EXPLOREDATA -->

    <!-- MANAGEMENT -->
    <li class="col-3" *ngIf="permission.management" [ngClass]="{'ddp-selected': lnbManager.management.fold == false}" >
      <div class="ddp-wrap-listmenu">
        <!-- tab title-->
        <a class="d-flex row no-gutters align-items-center pr-2 tabTitle" href="javascript:" (click)="depth1Menu1ClickListener( 'MANAGEMENT' )">
          <span class="col-">{{'msg.comm.menu.title.management' | translate}}</span>
          <i class="col- ml-auto" nz-icon type="down" theme="outline"></i>
        </a>
        <!--//tab  title -->
        <!-- sub -->
        <div class="ddp-list-sub">
          <!-- submenu -->
          <ul class="ddp-list-sublnb">
            <li *ngIf="permission.managementMetadata" [ngClass]="{'ddp-selected': lnbManager.management.metadata.fold == false}">
              <a class="row no-gutters" href="javascript:" (click)="mgmtMenuClickListener('METADATA')">
                <i class="col- pr-2" nz-icon type="plus" theme="outline"></i>
                <i class="col- pr-2" nz-icon type="minus" theme="outline"></i>
                <span class="col-">{{'msg.comm.menu.manage.metadata' | translate}}</span>
              </a>
              <ul class="ddp-list-sublnb-2depth">
                <li>
                  <a href="javascript:" (click)="move('management/metadata/metadata')">
                    {{'msg.comm.menu.manage.metadata.metadata' | translate}}
                  </a>
                </li>
                <li>
                  <a href="javascript:" (click)="move('management/metadata/column-dictionary')">
                    {{'msg.comm.menu.manage.metadata.column-dictionary' | translate}}
                  </a>
                </li>
                <li>
                  <a href="javascript:" (click)="move('management/metadata/code-table')">
                    {{'msg.comm.menu.manage.metadata.code-table' | translate}}
                  </a>
                </li>
                <li *ngIf="permission.lineage">
                  <a href="javascript:" (click)="move('management/metadata/lineage')">
                    {{'msg.comm.menu.manage.metadata.lineage' | translate}}
                  </a>
                </li>
                <li>
                  <a href="javascript:" (click)="move('management/metadata/catalog')">
                    {{'msg.comm.menu.manage.metadata.catalog' | translate}}
                  </a>
                </li>
              </ul>
            </li>
            <li *ngIf="permission.managementDatasource" [ngClass]="{'ddp-selected': lnbManager.management.dataStorage.fold == false}">
              <a class="row no-gutters" href="javascript:" (click)="mgmtMenuClickListener('DATASTORAGE')">
                <i class="col- pr-2" nz-icon type="plus" theme="outline"></i>
                <i class="col- pr-2" nz-icon type="minus" theme="outline"></i>
                <span class="col-">{{'msg.comm.menu.manage.storage' | translate}}</span>
              </a>
              <ul class="ddp-list-sublnb-2depth">
                <li>
                  <a href="javascript:" (click)="move('management/storage/datasource')">{{'msg.comm.menu.manage.storage.ds' | translate}}</a>
                </li>
                <li>
                  <a href="javascript:" (click)="move('management/storage/data-connection')">{{'msg.comm.menu.manage.storage.conn' | translate}}</a>
                </li>
              </ul>
            </li>
            <li *ngIf="permission.managementDatasource" [ngClass]="{'ddp-selected': lnbManager.management.dataPreparation.fold == false}">
              <a class="row no-gutters" href="javascript:" (click)="mgmtMenuClickListener('DATAPREPARATION')">
                <i class="col- pr-2" nz-icon type="plus" theme="outline"></i>
                <i class="col- pr-2" nz-icon type="minus" theme="outline"></i>
                <span class="col-">{{'msg.comm.menu.manage.prep' | translate}}</span>
              </a>
              <ul class="ddp-list-sublnb-2depth">
                <li>
                  <a href="javascript:" (click)="move('management/datapreparation/dataset')">{{'msg.comm.menu.manage.prep.set' | translate}}</a>
                </li>
                <li>
                  <a href="javascript:" (click)="move('management/datapreparation/dataflow')">{{'msg.comm.menu.manage.prep.flow' | translate}}</a>
                </li>
                <li>
                  <a href="javascript:" (click)="move('management/datapreparation/datasnapshot')">{{'msg.comm.menu.manage.prep.snapshot' | translate}}</a>
                </li>
              </ul>
            </li>
            <li *ngIf="permission.managementDatasource" [ngClass]="{'ddp-selected': lnbManager.management.modelManager.fold == false}">
              <a class="row no-gutters" href="javascript:" (click)="mgmtMenuClickListener('MODELMANAGER')">
                <i class="col- pr-2" nz-icon type="plus" theme="outline"></i>
                <i class="col- pr-2" nz-icon type="minus" theme="outline"></i>
                <span class="col-"> {{'msg.comm.menu.manage.model' | translate}}</span>
              </a>
              <ul class="ddp-list-sublnb-2depth">
                <!--<li>-->
                <!--<a href="javascript:" (click)="move('management/model/approval')">{{'msg.comm.menu.manage.model.approval' | translate}}</a>-->
                <!--</li>-->
                <li>
                  <a href="javascript:" (click)="move('management/model/notebook')">{{'msg.comm.menu.manage.model.notebook' | translate}}</a>
                </li>
              </ul>
            </li>
            <li *ngIf="permission.managementDatasource" [ngClass]="{'ddp-selected': lnbManager.management.dataMonitoring.fold == false}">
              <a class="row no-gutters" href="javascript:" (click)="mgmtMenuClickListener('DATAMONITORING')">
                <i class="col- pr-2" nz-icon type="plus" theme="outline"></i>
                <i class="col- pr-2" nz-icon type="minus" theme="outline"></i>
                <span class="col-">{{'msg.comm.menu.manage.monitoring' | translate}}</span>
              </a>
              <ul class="ddp-list-sublnb-2depth">
                <li>
                  <a href="javascript:" (click)="move('management/monitoring/statistics')">{{'msg.comm.menu.manage.monitoring.statistics' | translate}}</a>
                </li>
                <li>
                  <a href="javascript:" (click)="move('management/monitoring/audit')">{{'msg.comm.menu.manage.monitoring.audit' | translate}}</a>
                </li>
              </ul>
            </li>
            <ng-container *ngFor="let item of getExtensions('management')">
              <li [ngClass]="{'ddp-selected': isExtensionSelected('management', item.name)}" *ngIf="extensionPermission(item)">
                <a class="row no-gutters" href="javascript:" (click)="mgmtMenuClickListener(item.name)">
                  <i class="col- pr-2" nz-icon type="plus" theme="outline"></i>
                  <i class="col- pr-2" nz-icon type="minus" theme="outline"></i>
                  <span class="col-">{{item.name}}</span>
                </a>
                <ul class="ddp-list-sublnb-2depth">
                  <li *ngFor="let subKey of ObjectKeys(item.subContents)">
                    <a href="javascript:" (click)="moveExtension(item, subKey)">{{subKey}}</a>
                  </li>
                </ul>
              </li>
            </ng-container>
          </ul>
          <!-- //submenu -->
        </div>
        <!-- //sub -->
      </div>
    </li>
    <!-- //MANAGEMENT -->
    <!-- ADMINSTRATION -->
    <li class="col-3" [ngClass]="{'ddp-selected': lnbManager.administration.fold == false}" *ngIf="permission.userAdmin || permission.workspaceAdmin">
      <div class="ddp-wrap-listmenu">
        <a class="d-flex row no-gutters align-items-center pr-2 tabTitle" href="javascript:" (click)="depth1Menu1ClickListener( 'ADMINISTRATION' )">
          <span class="col-">{{'msg.comm.menu.title.administration' | translate}}</span>
          <i class="col- ml-auto" nz-icon type="down" theme="outline"></i>
        </a>
        <!-- sub -->
        <div class="ddp-list-sub">
          <!-- submenu -->
          <ul class="ddp-list-sublnb">
            <li [ngClass]="{'ddp-selected': lnbManager.administration.users.fold == false}" *ngIf="permission.userAdmin" >
              <a class="row no-gutters" (click)="adminMenuClickListener('USER')" href="javascript:">
                <i class="col- pr-2" nz-icon type="plus" theme="outline"></i>
                <i class="col- pr-2" nz-icon type="minus" theme="outline"></i>
                <span class="col-">{{ 'msg.comm.menu.admin.user' | translate }}</span>
              </a>
              <ul class="ddp-list-sublnb-2depth">
                <li >
                  <a href="javascript:" (click)="move('admin/user/approval')">{{'msg.comm.menu.admin.user.approval' | translate}}</a>
                </li>
                <li>
                  <a href="javascript:" (click)="move('admin/user/members')">{{'msg.comm.menu.admin.user.user' | translate}}</a>
                </li>
                <li>
                  <a href="javascript:" (click)="move('admin/user/groups')">{{'msg.comm.menu.admin.user.grp' | translate}}</a>
                </li>
                <li>
                  <a href="javascript:" (click)="move('admin/user/permission')">{{'msg.comm.menu.admin.user.permission' | translate}}</a>
                </li>
              </ul>
            </li>
            <li [ngClass]="{'ddp-selected': lnbManager.administration.workspaces.fold == false}" *ngIf="permission.workspaceAdmin" >
              <a class="row no-gutters" (click)="adminMenuClickListener('WORKSPACE')" href="javascript:">
                <i class="col- pr-2" nz-icon type="plus" theme="outline"></i>
                <i class="col- pr-2" nz-icon type="minus" theme="outline"></i>
                <span class="col-">{{'msg.comm.menu.admin.workspace' | translate}}</span>
              </a>
              <ul class="ddp-list-sublnb-2depth">
                <li>
                  <a href="javascript:" (click)="move('admin/workspaces/shared')">{{'msg.comm.menu.admin.workspace.shared' | translate}}</a>
                </li>
                <li>
                  <a href="javascript:" (click)="move('admin/workspaces/permission')">{{'msg.comm.menu.admin.workspace.permission' | translate}}</a>
                </li>
              </ul>
            </li>

            <ng-container *ngFor="let item of getExtensions('administration')">
              <li [ngClass]="{'ddp-selected': isExtensionSelected('administration', item.name)}" *ngIf="extensionPermission(item)">
                <a class="row no-gutters" href="javascript:" (click)="adminMenuClickListener(item.name)">
                  <i class="col- pr-2" nz-icon type="plus" theme="outline"></i>
                  <i class="col- pr-2" nz-icon type="minus" theme="outline"></i>
                  <span class="col-">{{item.name}}</span>
                </a>
                <ul class="ddp-list-sublnb-2depth">
                  <li *ngFor="let subKey of ObjectKeys(item.subContents)">
                    <a href="javascript:" (click)="moveExtension(item, subKey)">{{subKey}}</a>
                  </li>
                </ul>
              </li>
            </ng-container>

          </ul>
          <!-- //submenu -->
        </div>
        <!-- //sub -->
      </div>
    </li>
    <!-- //ADMINSTRATION -->
    <ng-container *ngFor="let item of getExtensions('ROOT')">
      <li class="col-3" [ngClass]="{'ddp-selected': lnbManager[item.name]['fold'] == false}" *ngIf="extensionPermission(item)">
        <div class="ddp-wrap-listmenu">
          <a class="d-flex row no-gutters align-items-center pr-2" href="javascript:" (click)="depth1Menu1ClickListener(item.name)">
            <span class="col-">{{item.name}}</span>
            <i class="col- ml-auto" nz-icon type="down" theme="outline"></i>
          </a>
          <!-- sub -->
          <div class="ddp-list-sub">
            <!-- submenu -->
            <ul class="ddp-list-sublnb">
              <ng-container *ngFor="let secondDepth of getExtensions(item.name)">
                <li [ngClass]="{'ddp-selected': isExtensionSelected(item.name, secondDepth.name)}" *ngIf="extensionPermission(secondDepth)">
                  <a href="javascript:" (click)="rootExtensionMenuClickListener(item.name, secondDepth.name)">
                    <em class="ddp-icon-dot"></em> {{secondDepth.name}}
                  </a>
                  <ul class="ddp-list-sublnb-2depth">
                    <li *ngFor="let subKey of ObjectKeys(secondDepth.subContents)">
                      <a href="javascript:" (click)="moveExtension(secondDepth, subKey)">{{subKey}}</a>
                    </li>
                  </ul>
                </li>
              </ng-container>

            </ul>
            <!-- //submenu -->
          </div>
          <!-- //sub -->
        </div>
      </li>
    </ng-container>
  </ul>
  <!-- help -->
  <div class="ddp-ui-help row no-gutters p-3">
    <div class="col- border-right px-3">
      <h3>{{'msg.lnb.label.help' | translate }} </h3>
      <div class="row no-gutters">
        <a (click)="downloadManual()" href="javascript:" class="col- ">
          <span class="col-">{{'msg.lnb.btn.manual' | translate}}</span>.
        </a>

        <a (click)="popupManual();" href="javascript:" class="col- pl-2">
          <span class="col-">{{'msg.lnb.btn.manual.web' | translate}}</span>
        </a>
      </div>

    </div>

    <div class="col- px-3">
      <h3>{{'msg.lnb.label.contact' | translate }} {{ 'msg.lnb.label.admin' | translate }}</h3>
      <a href="mailto:metatron@sk.com">contact@bigconnect.io</a>
    </div>

    <div *ngIf="buildInfo.appVersion !== 'STABLE'" class="col- ml-auto d-flex mt-auto">
      {{ 'msg.cluster.ui.create.version' | translate }}   {{buildInfo.appVersion}}
    </div>



  </div>
  <!-- //help -->
</div>
<!-- //lnb -->

<!-- Navigation Folder -->
<div class="ddp-wrap-folder-nav" *ngIf="isShow && isShowFolderNavi">
  <em class="ddp-bg-shadow" style="display: none;"></em>
  <!-- title nav -->
  <div class="ddp-ui-title-nav" style="min-width: 840px;">
    <div class="ddp-list-locate">
      <span *ngFor="let navi of folderNavigation">{{navi}}</span>
    </div>
  </div>
  <!-- // title nav -->
  <div class="ddp-ui-folder-nav ddp-selected">
    <ul class="ddp-list-folder-nav"
        *ngFor="let bookItemList of folderStructure; let idx = index">
      <li *ngFor="let bookItem of bookItemList"
          [class.ddp-list-folder]="'folder' === bookItem.type" >
        <a href="javascript:" (click)="moveToNavigationContent($event, bookItem)">
          <em [ngClass]="{'folder' : 'ddp-icon-folder',
          'workbook' : 'ddp-icon-workbook',
          'notebook' : 'ddp-icon-notebook',
          'workbench' : 'ddp-icon-workbench' }[bookItem.type]"></em>{{bookItem.name}}
          <em *ngIf="bookItem.hasSubBooks" class="ddp-box-view"
              (click)="exploreFolderNavigation($event, bookItem, idx)"></em>
        </a>
      </li>
    </ul>
  </div>
</div>
<!-- // Navigation Folder -->

<!-- 공유 워크스페이스 생성 모달 컴포넌트 -->
<app-create-workspace (createComplete)="moveWorkspace($event)"></app-create-workspace>
<!-- //공유 워크스페이스 생성 모달 컴포넌트 -->

<!-- 워크스페이스 리스트 -->
<app-workspace-list></app-workspace-list>

<!-- 확인 모달 팝업 -->
<app-confirm-modal></app-confirm-modal>
